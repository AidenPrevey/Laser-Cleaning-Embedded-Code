\doxysection{discrete\+\_\+filter.\+hpp}
\hypertarget{discrete__filter_8hpp_source}{}\label{discrete__filter_8hpp_source}\index{include/discrete\_filter.hpp@{include/discrete\_filter.hpp}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00002\ }
\DoxyCodeLine{00003\ \textcolor{preprocessor}{\#include\ <array>}}
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ <cstdint>}}
\DoxyCodeLine{00005\ }
\DoxyCodeLine{00017\ \textcolor{keyword}{template}\ <u\textcolor{keywordtype}{int}8\_t\ SIZE,\ \textcolor{keyword}{typename}\ T\ =\ \textcolor{keywordtype}{float}>}
\DoxyCodeLine{00018\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{struct_coefficients}{Coefficients}}}
\DoxyCodeLine{00019\ \{}
\DoxyCodeLine{00020\ \ \ \ \ std::array<T,\ SIZE>\ naturalResponseCoefficients;}
\DoxyCodeLine{00021\ \ \ \ \ std::array<T,\ SIZE>\ forcedResponseCoefficients;}
\DoxyCodeLine{00022\ \};}
\DoxyCodeLine{00023\ }
\DoxyCodeLine{00032\ \textcolor{keyword}{template}\ <u\textcolor{keywordtype}{int}8\_t\ SIZE,\ \textcolor{keyword}{typename}\ T\ =\ \textcolor{keywordtype}{float}>}
\DoxyCodeLine{00033\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_discrete_filter}{DiscreteFilter}}}
\DoxyCodeLine{00034\ \{}
\DoxyCodeLine{00035\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00044\ \ \ \ \ \mbox{\hyperlink{class_discrete_filter_ad3273dd4f6f008aa3cff2b22403634ca}{DiscreteFilter}}(}
\DoxyCodeLine{00045\ \ \ \ \ \ \ \ \ std::array<T,\ SIZE>\ naturalResponseCoefficients,}
\DoxyCodeLine{00046\ \ \ \ \ \ \ \ \ std::array<T,\ SIZE>\ forcedResponseCoefficients)}
\DoxyCodeLine{00047\ \ \ \ \ \ \ \ \ :\ naturalResponseCoefficients(naturalResponseCoefficients),}
\DoxyCodeLine{00048\ \ \ \ \ \ \ \ \ \ \ forcedResponseCoefficients(forcedResponseCoefficients)}
\DoxyCodeLine{00049\ \ \ \ \ \{}
\DoxyCodeLine{00050\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_discrete_filter_a7628cd3e60337e621a044ecf18a00ebc}{reset}}();}
\DoxyCodeLine{00051\ \ \ \ \ \}}
\DoxyCodeLine{00052\ }
\DoxyCodeLine{00053\ \ \ \ \ \mbox{\hyperlink{class_discrete_filter_ad3273dd4f6f008aa3cff2b22403634ca}{DiscreteFilter}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{struct_coefficients}{Coefficients<SIZE,\ T>}}\ coefficients)}
\DoxyCodeLine{00054\ \ \ \ \ \ \ \ \ :\ naturalResponseCoefficients(coefficients.naturalResponseCoefficients),}
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ \ \ forcedResponseCoefficients(coefficients.forcedResponseCoefficients)}
\DoxyCodeLine{00056\ \ \ \ \ \{}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_discrete_filter_a7628cd3e60337e621a044ecf18a00ebc}{reset}}();}
\DoxyCodeLine{00058\ \ \ \ \ \}}
\DoxyCodeLine{00059\ }
\DoxyCodeLine{00073\ \ \ \ \ T\ \mbox{\hyperlink{class_discrete_filter_a044148b7ad5ccd5522aed3a879efd60e}{filterData}}(\textcolor{keywordtype}{float}\ dat)}
\DoxyCodeLine{00074\ \ \ \ \ \{}
\DoxyCodeLine{00075\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ SIZE\ -\/\ 1;\ i\ >\ 0;\ i-\/-\/)}
\DoxyCodeLine{00076\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00077\ \ \ \ \ \ \ \ \ \ \ \ \ forcedResponse[i]\ =\ forcedResponse[i\ -\/\ 1];}
\DoxyCodeLine{00078\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00079\ \ \ \ \ \ \ \ \ forcedResponse[0]\ =\ dat;}
\DoxyCodeLine{00080\ }
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ sum\ =\ 0;}
\DoxyCodeLine{00082\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Sum\ of\ forced\ response\ coefficients\ multiplied\ by\ the\ forced\ response\ X(n-\/k)}}
\DoxyCodeLine{00083\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ (previous\ input\ data)}}
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ SIZE;\ i++)}
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ \ \ \ \ sum\ +=\ forcedResponseCoefficients[i]\ *\ forcedResponse[i];}
\DoxyCodeLine{00087\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00088\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Sum\ of\ natural\ response\ coefficients\ multiplied\ by\ the\ natural\ response\ Y(n-\/k)}}
\DoxyCodeLine{00089\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ (previous\ output\ data)}}
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ SIZE\ -\/\ 1;\ i++)}
\DoxyCodeLine{00091\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ \ \ \ \ sum\ -\/=\ naturalResponseCoefficients[i\ +\ 1]\ *\ naturalResponse[i];}
\DoxyCodeLine{00093\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00094\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Apply\ the\ 1/a\_0\ scaling\ to\ the\ output}}
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ sum\ /=\ naturalResponseCoefficients[0];}
\DoxyCodeLine{00096\ }
\DoxyCodeLine{00097\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Shift\ the\ natural\ response\ array\ to\ make\ room\ for\ the\ new\ output}}
\DoxyCodeLine{00098\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ SIZE\ -\/\ 1;\ i\ >\ 0;\ i-\/-\/)}
\DoxyCodeLine{00099\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00100\ \ \ \ \ \ \ \ \ \ \ \ \ naturalResponse[i]\ =\ naturalResponse[i\ -\/\ 1];}
\DoxyCodeLine{00101\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00102\ }
\DoxyCodeLine{00103\ \ \ \ \ \ \ \ \ naturalResponse[0]\ =\ sum;}
\DoxyCodeLine{00104\ }
\DoxyCodeLine{00105\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ naturalResponse[0];}
\DoxyCodeLine{00106\ \ \ \ \ \}}
\DoxyCodeLine{00107\ }
\DoxyCodeLine{00109\ \ \ \ \ T\ \mbox{\hyperlink{class_discrete_filter_af719977282f3d97e73d3e6e5543318eb}{getLastFiltered}}()\ \{\ \textcolor{keywordflow}{return}\ naturalResponse[0];\ \}}
\DoxyCodeLine{00110\ }
\DoxyCodeLine{00113\ \ \ \ \ T\ \mbox{\hyperlink{class_discrete_filter_a7628cd3e60337e621a044ecf18a00ebc}{reset}}()}
\DoxyCodeLine{00114\ \ \ \ \ \{}
\DoxyCodeLine{00115\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Reset\ the\ filter\ state\ to\ zero}}
\DoxyCodeLine{00116\ \ \ \ \ \ \ \ \ naturalResponse.fill(0.0f);}
\DoxyCodeLine{00117\ \ \ \ \ \ \ \ \ forcedResponse.fill(0.0f);}
\DoxyCodeLine{00118\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0.0f;}
\DoxyCodeLine{00119\ \ \ \ \ \}}
\DoxyCodeLine{00120\ }
\DoxyCodeLine{00121\ \ \ \ \ \textcolor{comment}{//\ fill\ it\ with\ the\ value\ given\ (good\ for\ init\ a\ DC\ gain)}}
\DoxyCodeLine{00122\ \ \ \ \ T\ fill(T\ value)}
\DoxyCodeLine{00123\ \ \ \ \ \{}
\DoxyCodeLine{00124\ \ \ \ \ \ \ \ \ naturalResponse.fill(value);}
\DoxyCodeLine{00125\ \ \ \ \ \ \ \ \ forcedResponse.fill(value);}
\DoxyCodeLine{00126\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ value;}
\DoxyCodeLine{00127\ \ \ \ \ \}}
\DoxyCodeLine{00128\ }
\DoxyCodeLine{00129\ \ \ \ \ \textcolor{keywordtype}{void}\ setCoefficients(\mbox{\hyperlink{struct_coefficients}{Coefficients<SIZE,\ T>}}\ coe)}
\DoxyCodeLine{00130\ \ \ \ \ \{}
\DoxyCodeLine{00131\ \ \ \ \ \ \ \ \ this-\/>naturalResponseCoefficients\ =\ coe.naturalResponseCoefficients;}
\DoxyCodeLine{00132\ \ \ \ \ \ \ \ \ this-\/>forcedResponseCoefficients\ \ =\ coe.forcedResponseCoefficients;}
\DoxyCodeLine{00133\ \ \ \ \ \}}
\DoxyCodeLine{00134\ }
\DoxyCodeLine{00135\ \ \ \ \ \textcolor{keywordtype}{void}\ setCoefficients(}
\DoxyCodeLine{00136\ \ \ \ \ \ \ \ \ std::array<T,\ SIZE>\ naturalResponseCoefficients,}
\DoxyCodeLine{00137\ \ \ \ \ \ \ \ \ std::array<T,\ SIZE>\ forcedResponseCoefficients)}
\DoxyCodeLine{00138\ \ \ \ \ \{}
\DoxyCodeLine{00139\ \ \ \ \ \ \ \ \ this-\/>naturalResponseCoefficients\ =\ naturalResponseCoefficients;}
\DoxyCodeLine{00140\ \ \ \ \ \ \ \ \ this-\/>forcedResponseCoefficients\ \ =\ forcedResponseCoefficients;}
\DoxyCodeLine{00141\ \ \ \ \ \}}
\DoxyCodeLine{00142\ }
\DoxyCodeLine{00143\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00144\ \ \ \ \ std::array<T,\ SIZE>\ naturalResponseCoefficients;}
\DoxyCodeLine{00145\ \ \ \ \ std::array<T,\ SIZE>\ forcedResponseCoefficients;}
\DoxyCodeLine{00146\ \ \ \ \ std::array<T,\ SIZE>\ naturalResponse;}
\DoxyCodeLine{00147\ \ \ \ \ std::array<T,\ SIZE>\ forcedResponse;}
\DoxyCodeLine{00148\ \};}

\end{DoxyCode}
